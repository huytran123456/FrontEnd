<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LAB 5</title>

    <!-- Fonts -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="shortcut icon" href="#">
</head>
<body>
<a class="btn btn-primary" href="Create.html" role="button">Create</a>
<a class="btn btn-primary" href="Update.html" role="button">Update</a>
<a class="btn btn-primary" href="Login.html" role="button">Login</a>
<div class=container-xl>
    <button class="btn btn-dark-green btn-block my-4" style='background-color:green' id='button_search'>Search</button>
    <table id="index_table">
    </table>
    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center" id='link_pa'>

        </ul>
    </nav>
</div>

<script src="js/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
<link href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css" rel="stylesheet">
<script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
<script type="text/javascript">
    //import axios from 'axios'
    // const axios=require('axios').default
    //const axios = require('axios')
    function wait(ms) {
        var start = new Date().getTime();
        var end = start;
        while (end < start + ms) {
            end = new Date().getTime();
        }
    }

    window.axios.defaults.headers.common = {
        'X-Requested-With': 'XMLHttpRequest',
        //'X-CSRF-TOKEN' : document.querySelector('meta[name="csrf-token"]').getAttribute('content'),
        'Content-Type': 'application/json',
        'Authorization': 'Bearer ' + Cookies.get('token')
    };

    $(document).ready(
        $('#button_search').click(function () {
            axios.get('https://trandinhhuy.ete.com/api/users')
                .then(function (response) {
                    console.log(response);
                    $('#index_table').DataTable({
                        "data": response.data,
                        responsive: true,
                        "columns": [
                            {"title": "ID", "data": "ID"},
                            {"title": "First Name", "data": "First Name"},
                            {"title": "Last Name", "data": "Last Name"},
                            {"title": "Email", "data": "Email"},
                            {"title": "Phone", "data": "Phone"},
                            {
                                "title":"",
                                "data": "",
                                render: function (dataField) { return '<a href="' + dataField + '">Action</a>'; }
                            }
                        ]
                    });
                })
        }))


</script>
</body>
</html>
